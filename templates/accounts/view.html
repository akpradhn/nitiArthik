{% extends "base.html" %}

{% block title %}{{ account.nickname }} - NitiArthik{% endblock %}

{% block content %}
<h1 style="margin-bottom: 30px;">{{ account.nickname }} ({{ account.account_type.value }})</h1>

<div class="stats-grid">
    <div class="stat-card credit">
        <div class="stat-label">Total Credits</div>
        <div class="stat-value">₹{{ "{:,.2f}".format(total_credits) }}</div>
    </div>
    <div class="stat-card debit">
        <div class="stat-label">Total Debits</div>
        <div class="stat-value">₹{{ "{:,.2f}".format(total_debits) }}</div>
    </div>
    <div class="stat-card net">
        <div class="stat-label">Net</div>
        <div class="stat-value">₹{{ "{:,.2f}".format(net) }}</div>
    </div>
</div>

<div class="card">
    <div class="card-header">Transactions</div>
    <table>
        <thead>
            <tr>
                <th>Date</th>
                <th>Description</th>
                <th>Category</th>
                <th>Direction</th>
                <th>Amount</th>
                <th>Balance</th>
            </tr>
        </thead>
        <tbody>
            {% for txn in transactions %}
            <tr>
                <td>{{ txn.date.strftime('%d-%m-%Y') }}</td>
                <td>{{ txn.description }}</td>
                <td>{{ txn.category }}</td>
                <td>
                    <span style="color: {% if txn.direction.value == 'credit' %}green{% else %}red{% endif %};">
                        {{ txn.direction.value|upper }}
                    </span>
                </td>
                <td>₹{{ "{:,.2f}".format(txn.amount) }}</td>
                <td>{% if txn.balance_after %}₹{{ "{:,.2f}".format(txn.balance_after) }}{% else %}-{% endif %}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
    
    {% if pagination.pages > 1 %}
    <div style="margin-top: 20px; display: flex; justify-content: center; gap: 10px;">
        {% if pagination.has_prev %}
        <a href="{{ url_for('accounts.view', account_id=account.id, page=pagination.prev_num) }}" class="btn btn-secondary">Previous</a>
        {% endif %}
        <span style="padding: 8px 16px; display: inline-block;">Page {{ pagination.page }} of {{ pagination.pages }}</span>
        {% if pagination.has_next %}
        <a href="{{ url_for('accounts.view', account_id=account.id, page=pagination.next_num) }}" class="btn btn-secondary">Next</a>
        {% endif %}
    </div>
    {% endif %}
</div>
{% endblock %}





